# 模块机制

## 概述

>> ## 异步操作
  >*  Node采用V8引擎处理JavaScript脚本，最大特点就是单线程运行，一次只能运行一个任务。这导致Node大量采用异步操作（asynchronous operation），即任务不是马上执行，而是插在任务队列的尾部，等到前面的任务运行完后再执行。
  >* 由于这种特性，某一个任务的后续操作，往往采用回调函数（callback）的形式进行定义。
  >* Node约定，如果某个函数需要回调函数作为参数，则回调函数是最后一个参数。另外，回调函数本身的第一个参数，约定为上一步传入的错误对象。

>> ## 全局对象和全局变量
> * global：表示Node所在的全局环境，类似于浏览器的window对象。需要注意的是，如果在浏览器中声明一个全局变量，实际上是声明了一个全局对象的属性，比如var x = 1等同于设置window.x = 1，但是Node不是这样，至少在模块中不是这样（REPL环境的行为与浏览器一致）。在模块文件中，声明var x = 1，该变量不是global对象的属性，global.x等于undefined。这是因为模块的全局变量都是该模块私有的，其他模块无法取到。
> * process：该对象表示Node所处的当前进程，允许开发者与该进程互动。
> *console：指向Node内置的console模块，提供命令行环境中的标准输入、标准输出功能。

>>> ### 全局函数
>> * setTimeout()：用于在指定毫秒之后，运行回调函数。实际的调用间隔，还取决于系统因素。间隔的毫秒数在1毫秒到2,147,483,647毫秒（约24.8天）之间。如果超过这个范围，会被自动改为1毫秒。该方法返回一个整数，代表这个新建定时器的编号。
>> * clearTimeout()：用于终止一个setTimeout方法新建的定时器。
>> * setInterval()：用于每隔一定毫秒调用回调函数。由于系统因素，可能无法保证每次调用之间正好间隔指定的毫秒数，但只会多于这个间隔，而不会少于它。指定的毫秒数必须是1到2,147,483,647（大约24.8天）之间的整数，如果超过这个范围，会被自动改为1毫秒。该方法返回一个整数，代表这个新建定时器的编号。
>> * clearInterval()：终止一个用setInterval方法新建的定时器。
>> * require()：用于加载模块。
>> * Buffer()：用于操作二进制数据。

>>> Node提供两个全局变量，都以两个下划线开头
>> * __filename：指向当前运行的脚本文件名
>> * __dirname：指向当前运行的脚本所在的目录。

## 模块概述

>* ### 参照 CommonJS 规范定义和使用模块
>* ### require 命令用于指定加载模块;两种方式 : 一种加载文件；
```js
var circle = require('./bar.js');
```
> * ### 另一种模块的安装目录，去寻找已安装的模块
```js
var bar = require('bar')
```
